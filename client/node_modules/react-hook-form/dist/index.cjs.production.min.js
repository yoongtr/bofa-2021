"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function r(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)r.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(t[n[s]]=e[n[s]])}return t}var t=e=>void 0===e,n=e=>null==e;const s=e=>"object"==typeof e;var c=e=>!n(e)&&!Array.isArray(e)&&s(e)&&!(e instanceof Date),u=e=>e.filter(Boolean),i=(e={},r,s)=>{const c=u(r.split(/[,[\].]+?/)).reduce((e,r)=>n(e)?e:e[r],e);return t(c)||c===e?t(e[r])?s:e[r]:c},a=e=>/^\w*$/.test(e),o=e=>u(e.replace(/["|']/g,"").replace(/\[/g,".").replace(/\]/g,"").split("."));function l(e,r,t){let n=-1;const s=a(r)?[r]:o(r),u=s.length,i=u-1;for(;++n<u;){const r=s[n];let u=t;if(n!==i){const t=e[r];u=c(t)||Array.isArray(t)?t:isNaN(+s[n+1])?{}:[]}e[r]=u,e=e[r]}return e}const f=(e,n,s)=>{for(const u of s||Object.keys(e)){const s=i(e,u);if(s){const{_f:e}=s,u=r(s,["_f"]);if(e&&n(e.name)){if(e.ref.focus&&t(e.ref.focus()))break;if(e.refs){e.refs[0].focus();break}}else c(u)&&f(u,n)}}};var d=e=>n(e)||!s(e);function y(r,t,n){if(d(r)||d(t)||r instanceof Date||t instanceof Date)return r===t;if(!e.isValidElement(r)){const e=Object.keys(r),s=Object.keys(t);if(e.length!==s.length)return!1;for(const s of e){const e=r[s];if(!n||"ref"!==s){const r=t[s];if((c(e)||Array.isArray(e))&&(c(r)||Array.isArray(r))?!y(e,r,n):e!==r)return!1}}}return!0}function b(e,r,t,n,s){let c=-1;for(;++c<e.length;){for(const n in e[c])Array.isArray(e[c][n])?(!t[c]&&(t[c]={}),t[c][n]=[],b(e[c][n],i(r[c]||{},n,[]),t[c][n],t[c],n)):y(i(r[c]||{},n),e[c][n])?l(t[c]||{},n):t[c]=Object.assign(Object.assign({},t[c]),{[n]:!0});n&&!t.length&&delete n[s]}return t}var g=(e,r,t)=>function e(r,t){if(d(r)||d(t))return t;for(const n in t){const s=r[n],u=t[n];try{r[n]=c(s)&&c(u)||Array.isArray(s)&&Array.isArray(u)?e(s,u):u}catch(e){}}return r}(b(e,r,t.slice(0,e.length)),b(r,e,t.slice(0,e.length))),m=e=>c(e)&&!Object.keys(e).length;const h="blur",v="onBlur",p="onChange",x="onSubmit",A="onTouched",O="all",j="max",k="min",V="maxLength",F="minLength",R="pattern",S="required",w="validate";var C=(e,r,t)=>m(e)||Object.keys(e).length>=Object.keys(r).length||Object.keys(e).find(e=>r[e]===(!t||O)),D=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:n},s)=>s?r?""===e?NaN:+e:t?new Date(e):n?n(e):e:e;const _=(e,t,n,s={})=>{for(const c in e.current){const u=e.current[c];if(u){const{_f:e}=u,i=r(u,["_f"]);l(s,c,e&&!e.ref.disabled?D(e.value,e,n):Array.isArray(u)?[]:{}),i&&_({current:i},t,n,s[c])}}return Object.assign(Object.assign({},t.current),s)},E={isValid:!1,value:null};var B=e=>Array.isArray(e)?e.reduce((e,r)=>r&&r.checked?{isValid:!0,value:r.value}:e,E):E,N=e=>"radio"===e.type,M=e=>"file"===e.type,T=e=>"checkbox"===e.type,I=e=>"select-multiple"===e.type;const $={value:!1,isValid:!1},P={value:!0,isValid:!0};var W=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(e=>e&&e.checked).map(({value:e})=>e);return{value:r,isValid:!!r.length}}const{checked:r,value:n,attributes:s}=e[0];return r?s&&!t(s.value)?t(n)?P:{value:n,isValid:!0}:P:$}return $};function L(e,r){if(e&&e._f){const{ref:n}=e._f;if(n.disabled)return;return M(n)?n.files:N(n)?B(e._f.refs).value:I(n)?(t=n.options,[...t].filter(({selected:e})=>e).map(({value:e})=>e)):T(n)?W(e._f.refs).value:D(n.value,e._f,r)}var t}var q=e=>e instanceof RegExp,H=e=>c(e)&&!q(e)?e:{value:e,message:""},z=e=>"string"==typeof e,G=e=>"function"==typeof e,J=e=>"boolean"==typeof e,K=r=>z(r)||e.isValidElement(r);function Q(e,r,t="validate"){if(K(e)||J(e)&&!e)return{type:t,message:K(e)?e:"",ref:r}}var U=(e,r,t,n,s)=>r?Object.assign(Object.assign({},t[e]),{types:Object.assign(Object.assign({},t[e]&&t[e].types?t[e].types:{}),{[n]:s||!0})}):{},X=async({_f:{ref:e,refs:r,required:t,maxLength:s,minLength:u,min:i,max:a,pattern:o,validate:l,name:f,value:d}},y)=>{const b={},g=N(e),h=T(e),v=g||h,p=!d||Array.isArray(d)&&!d.length,x=U.bind(null,f,y,b),A=(r,t,n,s=V,c=F)=>{const u=r?t:n;b[f]=Object.assign({type:r?s:c,message:u,ref:e},x(r?s:c,u))};if(t&&(!g&&!h&&(p||n(d))||J(d)&&!d||h&&!W(r).isValid||g&&!B(r).isValid)){const{value:n,message:s}=K(t)?{value:!!t,message:t}:H(t);if(n&&(b[f]=Object.assign({type:S,message:s,ref:v?(r||[])[0]||{}:e},x(S,s)),!y))return b}if(!(n(i)&&n(a)||""===d)){let r,t;const s=H(a),c=H(i);if(isNaN(d)){const n=e.valueAsDate||new Date(d);z(s.value)&&(r=n>new Date(s.value)),z(c.value)&&(t=n<new Date(c.value))}else{const u=e.valueAsNumber||parseFloat(d);n(s.value)||(r=u>s.value),n(c.value)||(t=u<c.value)}if((r||t)&&(A(!!r,s.message,c.message,j,k),!y))return b}if(z(d)&&!p&&(s||u)){const e=H(s),r=H(u),t=!n(e.value)&&d.length>e.value,c=!n(r.value)&&d.length<r.value;if((t||c)&&(A(t,e.message,r.message),!y))return b}if(z(d)&&o&&!p){const{value:r,message:t}=H(o);if(q(r)&&!r.test(d)&&(b[f]=Object.assign({type:R,message:t,ref:e},x(R,t)),!y))return b}if(l){const t=v&&r?r[0]:e;if(G(l)){const e=Q(await l(d),t);if(e&&(b[f]=Object.assign(Object.assign({},e),x(w,e.message)),!y))return b}else if(c(l)){let e={};for(const[r,n]of Object.entries(l)){if(!m(e)&&!y)break;const s=Q(await n(d),t,r);s&&(e=Object.assign(Object.assign({},s),x(r,s.message)),y&&(b[f]=e))}if(!m(e)&&(b[f]=Object.assign({ref:t},e),!y))return b}}return b},Y=e=>e.substring(0,e.search(/.\d/))||e,Z=(e,r)=>[...e].some(e=>Y(r)===e),ee=(e,r,t,n,s=!0)=>e?new Proxy(r,{get:(e,r)=>{if(r in e)return t.current[r]!==O&&(t.current[r]=!s||O),n&&(n.current[r]=!0),e[r]}}):r;class re{constructor(){this.tearDowns=[]}add(e){this.tearDowns.push(e)}unsubscribe(){for(const e of this.tearDowns)e();this.tearDowns=[]}}class te{constructor(e,r){this.observer=e,this.closed=!1,r.add(()=>this.closed=!0)}next(e){this.closed||this.observer.next(e)}}class ne{constructor(){this.observers=[]}next(e){for(const r of this.observers)r.next(e)}subscribe(e){const r=new re,t=new te(e,r);return this.observers.push(t),r}unsubscribe(){this.observers=[]}}var se="undefined"!=typeof window&&"undefined"!=typeof document;const ce=se?"Proxy"in window:"undefined"!=typeof Proxy,ue=(e,r,t=[])=>{for(const n in r)d(r[n])?t.push(`${e}.${n}`):ue(`${e}.${n}`,r[n],t);return t};function ie(e,r){const n=a(r)?[r]:o(r),s=1==n.length?e:function(e,r){const n=r.slice(0,-1).length;let s=0;for(;s<n;)e=t(e)?s++:e[r[s++]];return e}(e,n),u=n[n.length-1];let i;s&&delete s[u];for(let r=0;r<n.slice(0,-1).length;r++){let t,s=-1;const u=n.slice(0,-(r+1)),a=u.length-1;for(r>0&&(i=e);++s<u.length;){const r=u[s];t=t?t[r]:e[r],a===s&&(c(t)&&m(t)||Array.isArray(t)&&!t.filter(e=>c(e)&&!m(e)||J(e)).length)&&(i?delete i[r]:delete e[r]),i=t}}return e}var ae=e=>({isOnSubmit:!e||e===x,isOnBlur:e===v,isOnChange:e===p,isOnAll:e===O,isOnTouch:e===A}),oe=e=>e instanceof HTMLElement;function le(e,r){const t={};for(const n of e){const e=i(r,n);e&&(a(n)?t[n]=e._f:l(t,n,e._f))}return t}const fe="undefined"==typeof window;const de=e.createContext(null);de.displayName="RHFContext";const ye=()=>e.useContext(de);var be=()=>{const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const t=(16*Math.random()+e)%16|0;return("x"==r?t:3&t|8).toString(16)})},ge=(e=[],r)=>e.map(e=>Object.assign({[r]:e&&e[r]||be()},e));var me=(e,r)=>t(r)?[]:function(e,r){let t=0;const n=[...e];for(const e of r)n.splice(e-t,1),t++;return u(n).length?n:[]}(e,(Array.isArray(r)?r:[r]).sort()),he=(e,r,n)=>Array.isArray(e)?(t(e[n])&&(e[n]=void 0),e.splice(n,0,e.splice(r,1)[0]),e):[],ve=(e,r,t)=>{const n=[e[t],e[r]];e[r]=n[0],e[t]=n[1]};function pe(e,r){return[...Array.isArray(r)?r:[r||void 0],...e]}function xe(e,r,t){return[...e.slice(0,r),...Array.isArray(t)?t:[t],...e.slice(r)]}var Ae=e=>Array.isArray(e)?Array(e.length).fill(void 0):void 0;function Oe({control:r}={}){const t=ye(),{formStateRef:n,formStateSubjectRef:s,readFormStateRef:c}=r||t.control,[u,i]=e.useState(n.current),a=e.useRef(function e(r){let t;if(d(r)||se&&(r instanceof File||oe(r)))return r;if(r instanceof Date)return t=new Date(r.getTime()),t;if(r instanceof Set){t=new Set;for(const e of r)t.add(e);return t}if(r instanceof Map){t=new Map;for(const n of r.keys())t.set(n,e(r.get(n)));return t}t=Array.isArray(r)?[]:{};for(const n in r)t[n]=e(r[n]);return t}(c.current));return e.useEffect(()=>{const e=s.current.subscribe({next:e=>{C(e,a.current)&&i(Object.assign(Object.assign({},n.current),e))}});return()=>e.unsubscribe()},[]),ee(ce,u,c,a,!1)}function je({name:r,rules:n,defaultValue:s,control:u}){const a=ye(),{defaultValuesRef:o,register:l,fieldsRef:f,fieldArrayNamesRef:y,controllerSubjectRef:b}=u||a.control,{onChange:g,onBlur:m,ref:v}=l(r,n),p=()=>i(f.current,r)&&t(i(f.current,r)._f.value)||Z(y.current,r)?t(s)?i(o.current,r):s:i(f.current,r)._f.value,[x,A]=e.useState(p()),{errors:O,dirtyFields:j,touchedFields:k,isValidating:V}=Oe({control:u||a.control});return e.useEffect(()=>{i(f.current,r)&&(i(f.current,r)._f.value=p());const e=b.current.subscribe({next:e=>A(i(e,r))});return()=>e.unsubscribe()},[]),{field:{onChange:e=>{const n=(e=>d(e)||!c(e.target)||c(e.target)&&!e.type?e:t(e.target.value)?e.target.checked:e.target.value)(e);A(n),g({target:{value:n,name:r}})},onBlur:()=>{m({target:{name:r},type:h})},name:r,value:x,ref:v},meta:{invalid:!!i(O,r),isDirty:!!i(j,r),isTouched:!!i(k,r),error:i(O,r),isValidating:V}}}exports.Controller=e=>e.render(je(e)),exports.FormProvider=t=>{var{children:n}=t,s=r(t,["children"]);return e.createElement(de.Provider,{value:s},n)},exports.appendErrors=U,exports.get=i,exports.set=l,exports.transformToNestObject=(e,r={})=>{for(const t in e)a(t)?r[t]=e[t]:l(r,t,e[t]);return r},exports.useController=je,exports.useFieldArray=({control:n,name:s,keyName:c="id"})=>{const a=ye(),o=e.useRef(""),{isWatchAllRef:d,watchFieldsRef:y,getFormIsDirty:b,watchSubjectRef:m,fieldArraySubjectRef:h,fieldArrayNamesRef:v,fieldsRef:p,defaultValuesRef:x,formStateRef:A,formStateSubjectRef:O,readFormStateRef:j,validFieldsRef:k,fieldsWithValidationRef:V,fieldArrayDefaultValuesRef:F}=n||a.control,[R,S]=e.useState(ge(i(F.current,Y(s))?i(F.current,s,[]):i(x.current,s,[]),c));l(F.current,s,[...R]),v.current.add(s);const w=e=>e.map((e={})=>{var t=c;e[t];return r(e,["symbol"==typeof t?t:t+""])}),C=()=>{const e=i(_(p,x),s,[]);return ge(i(F.current,s,[]).map((r,t)=>Object.assign(Object.assign({},r),e[t])),c)},D=(e,r)=>{if(r){if(!t(r.focusIndex))return`${s}.${r.focusIndex}`;if(r.focusName)return r.focusName;if(!r.shouldFocus)return""}return`${s}.${e}`},E=e=>{S(ge(e,c)),h.current.next({name:s,fields:w([...e])})},B=e=>!u(i(e,s,[])).length&&ie(e,s),N=e=>e&&l(A.current.dirtyFields,s,g(w(e),i(x.current,s,[]),i(A.current.dirtyFields,s,[]))),M=(e,r,t,n=[],c=!0,u=!1)=>{if(i(p.current,s)){const t=e(i(p.current,s),r.argA,r.argB);c&&l(p.current,s,t)}if(Array.isArray(i(A.current.errors,s))){const t=e(i(A.current.errors,s),r.argA,r.argB);c&&l(A.current.errors,s,t),B(A.current.errors)}if(j.current.touchedFields&&i(A.current.touchedFields,s)){const t=e(i(A.current.touchedFields,s),r.argA,r.argB);c&&l(A.current.touchedFields,s,t),B(A.current.touchedFields)}(j.current.dirtyFields||j.current.isDirty)&&(l(A.current.dirtyFields,s,g(w(n),i(x.current,s,[]),i(A.current.dirtyFields,s,[]))),N(t),B(A.current.dirtyFields)),u&&j.current.isValid&&(l(k.current,s,e(i(k.current,s,[]),r.argA)),B(k.current),l(V.current,s,e(i(V.current,s,[]),r.argA)),B(V.current)),O.current.next({isDirty:b(s,w(n)),errors:A.current.errors,isValid:A.current.isValid})};return e.useEffect(()=>{if(d.current)O.current.next({});else for(const e of y.current)if(s.startsWith(e)){O.current.next({});break}m.current.next({name:s}),o.current&&f(p.current,e=>e.startsWith(o.current)),o.current=""},[R,s]),e.useEffect(()=>{const e=h.current.subscribe({next({name:e,fields:r,isReset:t}){if(t)if(e){const t=_(p,x);l(t,e,r),l(F.current,s,r),E(i(t,s))}else F.current=r,E(i(r,s))}});return()=>{e.unsubscribe(),ie(F.current,s),v.current.delete(s)}},[]),{swap:e.useCallback((e,r)=>{const t=C();ve(t,e,r),M(ve,{argA:e,argB:r},void 0,t,!1),E(t)},[s]),move:e.useCallback((e,r)=>{const t=C();he(t,e,r),E(t),M(he,{argA:e,argB:r},void 0,t,!1)},[s]),prepend:e.useCallback((e,r)=>{const t=pe(C(),Array.isArray(e)?e:[e]);E(t),M(pe,{argA:Ae(e)},t),o.current=D(0,r)},[s]),append:e.useCallback((e,r)=>{const t=Array.isArray(e)?e:[e],n=[...C(),...t];E(n),(j.current.dirtyFields||j.current.isDirty)&&(N(n),O.current.next({isDirty:!0,dirtyFields:A.current.dirtyFields})),o.current=D(n.length-1,r)},[s]),remove:e.useCallback(e=>{const r=C(),t=me(r,e);(e=>{(Array.isArray(e)?e:[e]).forEach(e=>l(p.current,`${s}${e?"."+e:""}`,[]))})(e),M(me,{argA:e},t,me(r,e),!0,!0),E(t)},[s]),insert:e.useCallback((e,r,t)=>{const n=C(),s=xe(n,e,Array.isArray(r)?r:[r]);E(s),M(xe,{argA:e,argB:Ae(r)},s,n&&xe(n,e)),o.current=D(e,t)},[s]),fields:R}},exports.useForm=function({mode:s=x,reValidateMode:c=p,resolver:a,context:o,defaultValues:d={},shouldFocusError:b=!0,criteriaMode:v}={}){const A=e.useRef({}),j=e.useRef(new Set),k=e.useRef(new ne),V=e.useRef(new ne),F=e.useRef(new ne),R=e.useRef(new ne),S=e.useRef({}),w=e.useRef({}),D=e.useRef(new Set),E=e.useRef(!1),B=e.useRef({}),$=e.useRef({}),P=e.useRef(d),W=e.useRef(!1),q=e.useRef(o),H=e.useRef(a),J=e.useRef(new Set),K=ae(s),Q=v===O,[U,re]=e.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!K.isOnSubmit,errors:{}}),te=e.useRef({isDirty:!ce,dirtyFields:!ce,touchedFields:!ce||K.isOnTouch,isValidating:!ce,isValid:!ce,errors:!ce}),de=e.useRef(U);q.current=o,H.current=a;const ye=()=>de.current.isValid=y($.current,B.current)&&m(de.current.errors),be=e.useCallback((e,r,s=!1,c={},u)=>{let a=s||(({errors:e,name:r,error:n,validFields:s,fieldsWithValidation:c})=>{const u=t(n),a=i(e,r);return u&&!!a||!u&&!y(a,n,!0)||u&&i(c,r)&&!i(s,r)})({errors:de.current.errors,error:r,name:e,validFields:$.current,fieldsWithValidation:B.current});const o=i(de.current.errors,e);r?(ie($.current,e),a=a||!o||!y(o,r,!0),l(de.current.errors,e,r)):((i(B.current,e)||H.current)&&(l($.current,e,!0),a=a||o),ie(de.current.errors,e)),(a&&!n(s)||!m(c))&&k.current.next(Object.assign(Object.assign({},c),{isValid:H.current?u:ye(),errors:de.current.errors})),k.current.next({isValidating:!1})},[]),ge=e.useCallback((e,r)=>{const{_f:t}=i(A.current,e);if(t){const{ref:e,refs:s}=t,c=se&&oe(e)&&n(r)?"":r;t.value=r,N(e)?(s||[]).forEach(e=>e.checked=e.value===c):M(e)&&!z(c)?e.files=c:I(e)?[...e.options].forEach(e=>e.selected=c.includes(e.value)):T(e)&&s?s.length>1?s.forEach(e=>e.checked=Array.isArray(c)?!!c.find(r=>r===e.value):c===e.value):s[0].checked=!!c:e.value=c}},[]),me=e.useCallback((e,r)=>{if(te.current.isDirty){const t=Re();return e&&r&&l(t,e,r),!y(t,P.current)}return!1},[]),he=e.useCallback((e,r=!0)=>{if(te.current.isDirty||te.current.dirtyFields){const t=!y(i(P.current,e),L(i(A.current,e),!0)),n=i(de.current.dirtyFields,e),s=de.current.isDirty;t?l(de.current.dirtyFields,e,!0):ie(de.current.dirtyFields,e);const c={isDirty:me(),dirtyFields:de.current.dirtyFields},u=te.current.isDirty&&s!==c.isDirty||te.current.dirtyFields&&n!==i(de.current.dirtyFields,e);return u&&r&&k.current.next(c),u?c:{}}return{}},[]),ve=e.useCallback(async(e,r)=>{const n=(await X(i(A.current,e),Q))[e];return be(e,n,r),t(n)},[be,Q]),pe=e.useCallback(async(e,r=[])=>{const{errors:t}=await H.current(_(A,P,!0),q.current,{criteriaMode:v,names:r,fields:le(j.current,A.current)});for(const r of e){const e=i(t,r);e?l(de.current.errors,r,e):ie(de.current.errors,r)}return t},[be,v]),xe=async e=>{for(const t in e){const n=e[t];if(n){const{_f:e}=n,t=r(n,["_f"]);if(e){const e=await X(n,Q);e[n._f.name]?(l(de.current.errors,n._f.name,e[n._f.name]),ie($.current,n._f.name)):i(B.current,n._f.name)&&(l($.current,n._f.name,!0),ie(de.current.errors,n._f.name))}t&&await xe(t)}}},Ae=e.useCallback(async e=>{const r=t(e)?Object.keys(A.current):Array.isArray(e)?e:[e];let n;k.current.next({isValidating:!0}),a?n=m(await pe(r,t(e)?void 0:r)):t(e)?await xe(A.current):await Promise.all(r.map(async e=>await ve(e,null))),k.current.next({errors:de.current.errors,isValidating:!1,isValid:a?n:ye()})},[pe,ve]),Oe=e.useCallback((e,r,{shouldDirty:t,shouldValidate:n})=>{const s={};l(s,e,r);for(const c of ue(e,r))i(A.current,c)&&(ge(c,i(s,c)),t&&he(c),n&&Ae(c))},[Ae,ge,he]),je=e.useCallback((e,r,t)=>{const n=i(A.current,e);n&&n._f?(ge(e,r),t.shouldDirty&&he(e),t.shouldValidate&&Ae(e)):(Oe(e,r,t),J.current.has(e)&&(R.current.next({fields:r,name:e,isReset:!0}),(te.current.isDirty||te.current.dirtyFields)&&t.shouldDirty&&(l(de.current.dirtyFields,e,g(r,i(P.current,e,[]),i(de.current.dirtyFields,e,[]))),k.current.next({dirtyFields:de.current.dirtyFields,isDirty:me(e,r)}))))},[he,ge,Oe]),ke=e=>W.current||D.current.has(e)||D.current.has((e.match(/\w+/)||[])[0]),Ve=e=>{let r;const n=Z(J.current,e),s=i(A.current,e);return!s||m(P.current)&&t(s._f.value)||(r=t(s._f.value)?i(P.current,e):s._f.value,t(r)||n||ge(e,r)),r},Fe=e.useCallback(async({type:e,target:r,target:{value:n,type:s}})=>{let u,a,o=r.name;const f=i(A.current,o);if(f){const d=s?L(f):n,y=e===h,{isOnBlur:b,isOnChange:g}=ae(c),p=(({isOnBlur:e,isOnChange:r,isOnTouch:t,isTouched:n,isReValidateOnBlur:s,isReValidateOnChange:c,isBlurEvent:u,isSubmitted:i,isOnAll:a})=>!a&&(!i&&t?!(n||u):(i?s:e)?!u:!(i?c:r)||u))(Object.assign({isBlurEvent:y,isTouched:!!i(de.current.touchedFields,o),isSubmitted:de.current.isSubmitted,isReValidateOnBlur:b,isReValidateOnChange:g},K)),x=!y&&ke(o);t(d)||(f._f.value=d);const O=he(o,!1);y&&te.current.touchedFields&&!i(de.current.touchedFields,o)&&(l(de.current.touchedFields,o,!0),O.touchedFields=de.current.touchedFields);let j=!m(O)||x;if(p)return!y&&V.current.next({name:o,type:e,value:d}),j&&k.current.next(x?{}:O);if(k.current.next({isValidating:!0}),H.current){const{errors:e}=await H.current(_(A,P,!0),q.current,{criteriaMode:v,fields:le([o],A.current),names:[o]}),t=de.current.isValid;if(u=i(e,o),T(r)&&!u){const r=Y(o),t=i(e,r,{});t.type&&t.message&&(u=t),(t||i(de.current.errors,r))&&(o=r)}a=m(e),t!==a&&(j=!0)}else u=(await X(f,Q))[o];!y&&V.current.next({name:o,type:e,value:d}),be(o,u,j,O,a)}},[]);function Re(e){const r=E.current?_(A,P):d;return t(e)?r:z(e)?i(r,e):e.map(e=>i(r,e))}const Se=e.useCallback(async(e={})=>{if(a){const{errors:r}=await H.current(Object.assign(Object.assign({},_(A,P,!0)),e),q.current,{criteriaMode:v,fields:le(j.current,A.current)}),t=m(r);de.current.isValid!==t&&k.current.next({isValid:t})}else ye()},[v]),we=e.useCallback((e,r,n)=>{const{fields:s,name:c}=S.current,u=Array.isArray(e);let a=E.current?Re():t(r)?P.current:u?r||{}:{[e]:r};if(s&&(c?l(a,c,s):a=s,S.current={fields:void 0,name:void 0}),t(e))return W.current=!0,a;const o=[];for(const r of u?e:[e])n&&D.current.add(r),o.push(i(a,r));return u?o:o[0]},[]),Ce=(e,r,t)=>{let n=i(A.current,e);if(n){const s=(e=>N(e)||T(e))(r);if((s?Array.isArray(n._f.refs)&&u(n._f.refs).find(e=>r.value===e.value&&e===r):r===n._f.ref)||!n)return;n={_f:s?Object.assign(Object.assign({},n._f),{refs:[...u(n._f.refs||[]).filter(e=>oe(e)&&document.contains(e)),r],ref:{type:r.type,name:e}}):Object.assign(Object.assign({},n._f),{ref:r})},l(A.current,e,n);const c=Ve(e);s&&Array.isArray(c)&&y(i(A.current,e)._f.value,c)||(i(A.current,e)._f.value=L(i(A.current,e))),t&&!K.isOnSubmit&&n&&te.current.isValid&&X(n,Q).then(r=>{m(r)?l($.current,e,!0):ie($.current,e),de.current.isValid&&!m(r)&&re(Object.assign(Object.assign({},de.current),{isValid:ye()}))})}},De=e.useCallback((e,r)=>(l(A.current,e,{_f:Object.assign(Object.assign(Object.assign({},i(A.current,e)?Object.assign({ref:i(A.current,e)._f.ref},i(A.current,e)._f):{ref:{name:e}}),{name:e}),r)}),r&&l(B.current,e,!0),j.current.add(e),Ve(e),fe?{}:{name:e,onChange:Fe,onBlur:Fe,ref:t=>t&&Ce(e,t,r)}),[P.current]),_e=e.useCallback((e,r)=>async t=>{t&&t.preventDefault&&(t.preventDefault(),t.persist());let n=_(A,P,!0);k.current.next({isSubmitting:!0});try{if(H.current){const{errors:e,values:r}=await H.current(n,q.current,{criteriaMode:v,fields:le(j.current,A.current)});de.current.errors=e,n=r}else await xe(A.current);m(de.current.errors)&&Object.keys(de.current.errors).every(e=>i(n,e))?(k.current.next({errors:{},isSubmitting:!0}),await e(n,t)):(r&&await r(de.current.errors,t),b&&f(A.current,e=>i(de.current.errors,e),j.current))}finally{de.current.isSubmitting=!1,k.current.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:m(de.current.errors),submitCount:de.current.submitCount+1,errors:de.current.errors})}},[b,Q,v]);return e.useEffect(()=>{a&&te.current.isValid&&Se()},[P.current]),e.useEffect(()=>{E.current=!0;const e=k.current.subscribe({next(e={}){C(e,te.current,!0)&&(de.current=Object.assign(Object.assign({},de.current),e),re(de.current))}}),r=R.current.subscribe({next(e){if(e.fields&&e.name&&(S.current=e,te.current.isValid)){const r=Re();l(r,e.name,e.fields),Se(r)}}});return()=>{V.current.unsubscribe(),e.unsubscribe(),r.unsubscribe()}},[]),{control:e.useMemo(()=>({register:De,isWatchAllRef:W,watchFieldsRef:D,getFormIsDirty:me,formStateSubjectRef:k,fieldArraySubjectRef:R,controllerSubjectRef:F,watchSubjectRef:V,watchInternal:we,fieldsRef:A,validFieldsRef:$,fieldsWithValidationRef:B,fieldArrayNamesRef:J,readFormStateRef:te,formStateRef:de,defaultValuesRef:P,fieldArrayDefaultValuesRef:w}),[]),formState:ee(ce,U,te),trigger:Ae,register:De,handleSubmit:_e,watch:e.useCallback((function(e,r){return G(e)?V.current.subscribe({next:t=>e(we(void 0,r),t)}):we(e,r,!0)}),[]),setValue:e.useCallback((e,r,t)=>{je(e,r,t||{}),ke(e)&&k.current.next({}),V.current.next({name:e,value:r})},[je,Ae]),getValues:e.useCallback(Re,[]),reset:e.useCallback((e,r={})=>{const t=e||P.current;if(se&&!r.keepValues)for(const e of Object.values(A.current))if(e&&e._f){const{ref:r,refs:t}=e._f,n=Array.isArray(t)?t[0]:r;if(oe(n))try{n.closest("form").reset();break}catch(e){}}!r.keepDefaultValues&&(P.current=Object.assign({},t)),r.keepValues||(A.current={},F.current.next(Object.assign({},t)),V.current.next({value:Object.assign({},t)}),R.current.next({fields:Object.assign({},t),isReset:!0})),(({keepErrors:e,keepDirty:r,keepIsSubmitted:t,keepTouched:n,keepIsValid:s,keepSubmitCount:c})=>{s||($.current={},B.current={}),D.current=new Set,W.current=!1,k.current.next({submitCount:c?de.current.submitCount:0,isDirty:!!r&&de.current.isDirty,isSubmitted:!!t&&de.current.isSubmitted,isValid:s?de.current.isValid:!K.isOnSubmit,dirtyFields:r?de.current.dirtyFields:{},touchedFields:n?de.current.touchedFields:{},errors:e?de.current.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})})(r)},[]),clearErrors:e.useCallback(e=>{e&&(Array.isArray(e)?e:[e]).forEach(e=>ie(de.current.errors,e)),k.current.next({errors:e?de.current.errors:{}})},[]),unregister:e.useCallback((e,r={})=>{for(const t of e?Array.isArray(e)?e:[e]:Object.keys(j.current))j.current.delete(t),i(A.current,t)&&(r.keepIsValid||(ie(B.current,t),ie($.current,t)),!r.keepValues&&ie(de.current.errors,t),!r.keepErrors&&ie(A.current,t),!r.keepDirty&&ie(de.current.dirtyFields,t),!r.keepTouched&&ie(de.current.touchedFields,t),!r.keepDefaultValues&&ie(P.current,t),V.current.next({name:t}));k.current.next(Object.assign(Object.assign(Object.assign({},de.current),r.keepDirty?{isDirty:me()}:{}),a?{}:{isValid:ye()})),r.keepIsValid||Se()},[]),setError:e.useCallback((e,r,t)=>{const n=(i(A.current,e)||{_f:{}})._f.ref;l(de.current.errors,e,Object.assign(Object.assign({},r),{ref:n})),k.current.next({errors:de.current.errors,isValid:!1}),t&&t.shouldFocus&&n&&n.focus&&n.focus()},[])}},exports.useFormContext=ye,exports.useFormState=Oe,exports.useWatch=function({control:r,name:n,defaultValue:s}){const u=ye(),{watchInternal:a,defaultValuesRef:o,watchSubjectRef:l}=r||u.control,[f,d]=e.useState(t(s)?Array.isArray(n)?n.reduce((e,r)=>Object.assign(Object.assign({},e),{[r]:i(o.current,r)}),{}):z(n)?i(o.current,n):o.current:s);return e.useEffect(()=>{const e=l.current.subscribe({next:({name:e,value:r})=>{d(z(e)&&n===e&&!t(r)?r:n&&c(r)?i(r,n,s):a(n,s))}});return()=>e.unsubscribe()},[n]),f};
//# sourceMappingURL=index.cjs.production.min.js.map
